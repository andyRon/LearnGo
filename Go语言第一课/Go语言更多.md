Goè¯­è¨€æ›´å¤š
------



å‚è€ƒï¼š

[ã€ŠGOè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®è·µï¼ˆè¶…å€¼ç‰ˆï¼‰ã€‹ä½™å»ºç†™ 2022](http://www.tup.tsinghua.edu.cn/bookscenter/book_09281301.html)

[ã€ŠGoè¯­è¨€å¼€å‘å®æˆ˜ï¼ˆæ…•è¯¾ç‰ˆï¼‰ã€‹åƒé”‹æ•™è‚²é«˜æ•™äº§å“ç ”å‘éƒ¨ 2020](https://book.douban.com/subject/34956558/)

[ã€ŠGoè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ï¼ˆè§†é¢‘ç‰ˆï¼‰ã€‹](https://book.douban.com/subject/36049170/) åˆ˜ç‘œ 2022

## 47 Goæ ‡å‡†åº“

å‚è€ƒï¼š

https://www.topgoer.com/%E5%B8%B8%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93/

### 47.1 fmtåŒ…

#### å‘å¤–è¾“å‡º

##### Printç³»åˆ—

åŒºåˆ«åœ¨äºPrintå‡½æ•°ç›´æ¥è¾“å‡ºå†…å®¹ï¼ŒPrintfå‡½æ•°æ”¯æŒæ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²ï¼ŒPrintlnå‡½æ•°ä¼šåœ¨è¾“å‡ºå†…å®¹çš„ç»“å°¾æ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚

```go
func Print(a ...interface{}) (n int, err error)
func Printf(format string, a ...interface{}) (n int, err error)
func Println(a ...interface{}) (n int, err error)
```

##### Fprintç³»åˆ—

Fprintç³»åˆ—å‡½æ•°ä¼šå°†å†…å®¹è¾“å‡ºåˆ°ä¸€ä¸ªio.Writeræ¥å£ç±»å‹çš„å˜é‡wä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨è¿™ä¸ªå‡½æ•°å¾€æ–‡ä»¶ä¸­å†™å…¥å†…å®¹ã€‚

```go
func Fprint(w io.Writer, a ...interface{}) (n int, err error)
func Fprintf(w io.Writer, format string, a ...interface{}) (n int, err error)
func Fprintln(w io.Writer, a ...interface{}) (n int, err error)
```

```go
// å‘æ ‡å‡†è¾“å‡ºå†™å…¥å†…å®¹
fmt.Fprintln(os.Stdout, "å‘æ ‡å‡†è¾“å‡ºå†™å…¥å†…å®¹")
fileObj, err := os.OpenFile("./xx.txt", os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0644)
if err != nil {
    fmt.Println("æ‰“å¼€æ–‡ä»¶å‡ºé”™ï¼Œerr:", err)
    return
}
name := "æ¯è—¤"
// å‘æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„ä¸­å†™å…¥å†…å®¹
fmt.Fprintf(fileObj, "å¾€æ–‡ä»¶ä¸­å†™å¦‚ä¿¡æ¯ï¼š%s", name)
```

æ³¨æ„ï¼Œåªè¦æ»¡è¶³io.Writeræ¥å£çš„ç±»å‹éƒ½æ”¯æŒå†™å…¥ã€‚

##### Sprintç³»åˆ—

Sprintç³»åˆ—å‡½æ•°ä¼šæŠŠä¼ å…¥çš„æ•°æ®ç”Ÿæˆå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

```go
func Sprint(a ...interface{}) string
func Sprintf(format string, a ...interface{}) string
func Sprintln(a ...interface{}) string
```

##### Errorf

Errorfå‡½æ•°æ ¹æ®formatå‚æ•°ç”Ÿæˆæ ¼å¼åŒ–å­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¯¥å­—ç¬¦ä¸²çš„é”™è¯¯ã€‚

```go
func Errorf(format string, a ...interface{}) error
```

é€šå¸¸ä½¿ç”¨è¿™ç§æ–¹å¼æ¥è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```go
err := fmt.Errorf("è¿™æ˜¯ä¸€ä¸ªé”™è¯¯")
```

#### æ ¼å¼åŒ–å ä½ç¬¦

`*printf`ç³»åˆ—å‡½æ•°éƒ½æ”¯æŒformatæ ¼å¼åŒ–å‚æ•°ã€‚

æŒ‰ç…§å ä½ç¬¦å°†è¢«æ›¿æ¢çš„å˜é‡ç±»å‹åˆ’åˆ†ï¼š

| é€šç”¨å ä½ç¬¦               | è¯´æ˜                                                         |
| ------------------------ | ------------------------------------------------------------ |
| %v                       | å€¼çš„é»˜è®¤æ ¼å¼è¡¨ç¤º                                             |
| %+v                      | ç±»ä¼¼%vï¼Œä½†è¾“å‡ºç»“æ„ä½“æ—¶ä¼šæ·»åŠ å­—æ®µå                           |
| %#v                      | å€¼çš„Goè¯­æ³•è¡¨ç¤º                                               |
| %T                       | æ‰“å°å€¼çš„ç±»å‹                                                 |
| %%                       | ç™¾åˆ†å·                                                       |
| **å¸ƒå°”å ä½ç¬¦**           |                                                              |
| %t                       | trueæˆ–false                                                  |
| **æ•´å‹å ä½ç¬¦**           |                                                              |
| %b                       | è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶                                                 |
| %c                       | è¯¥å€¼å¯¹åº”çš„unicodeç å€¼                                        |
| %d                       | è¡¨ç¤ºä¸ºåè¿›åˆ¶                                                 |
| %o                       | è¡¨ç¤ºä¸ºå…«è¿›åˆ¶                                                 |
| %x                       | è¡¨ç¤ºä¸ºåå…­è¿›åˆ¶ï¼Œä½¿ç”¨a-f                                      |
| %X                       | è¡¨ç¤ºä¸ºåå…­è¿›åˆ¶ï¼Œä½¿ç”¨A-F                                      |
| %U                       | è¡¨ç¤ºä¸ºUnicodeæ ¼å¼ï¼šU+1234ï¼Œç­‰ä»·äºâ€U+%04Xâ€                    |
| %q                       | è¯¥å€¼å¯¹åº”çš„å•å¼•å·æ‹¬èµ·æ¥çš„goè¯­æ³•å­—ç¬¦å­—é¢å€¼ï¼Œå¿…è¦æ—¶ä¼šé‡‡ç”¨å®‰å…¨çš„è½¬ä¹‰è¡¨ç¤º |
| **æµ®ç‚¹æ•°ä¸å¤æ•°å ä½ç¬¦**   |                                                              |
| %b                       | æ— å°æ•°éƒ¨åˆ†ã€äºŒè¿›åˆ¶æŒ‡æ•°çš„ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚-123456p-78            |
| %e                       | ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚-1234.456e+78                                  |
| %E                       | ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚-1234.456E+78                                  |
| %f                       | æœ‰å°æ•°éƒ¨åˆ†ä½†æ— æŒ‡æ•°éƒ¨åˆ†ï¼Œå¦‚123.456                            |
| %F                       | ç­‰ä»·äº%f                                                     |
| %g                       | æ ¹æ®å®é™…æƒ…å†µé‡‡ç”¨%eæˆ–%fæ ¼å¼ï¼ˆä»¥è·å¾—æ›´ç®€æ´ã€å‡†ç¡®çš„è¾“å‡ºï¼‰       |
| %G                       | æ ¹æ®å®é™…æƒ…å†µé‡‡ç”¨%Eæˆ–%Fæ ¼å¼ï¼ˆä»¥è·å¾—æ›´ç®€æ´ã€å‡†ç¡®çš„è¾“å‡ºï¼‰       |
| **å­—ç¬¦ä¸²å’Œ[]byteå ä½ç¬¦** |                                                              |
| %s                       | ç›´æ¥è¾“å‡ºå­—ç¬¦ä¸²æˆ–è€…[]byte                                     |
| %q                       | è¯¥å€¼å¯¹åº”çš„åŒå¼•å·æ‹¬èµ·æ¥çš„goè¯­æ³•å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œå¿…è¦æ—¶ä¼šé‡‡ç”¨å®‰å…¨çš„è½¬ä¹‰è¡¨ç¤º |
| %x                       | æ¯ä¸ªå­—èŠ‚ç”¨ä¸¤å­—ç¬¦åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼ˆä½¿ç”¨a-f                      |
| %X                       | æ¯ä¸ªå­—èŠ‚ç”¨ä¸¤å­—ç¬¦åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼ˆä½¿ç”¨A-Fï¼‰                    |
| **æŒ‡é’ˆ**                 |                                                              |
| %p                       | è¡¨ç¤ºä¸ºåå…­è¿›åˆ¶ï¼Œå¹¶åŠ ä¸Šå‰å¯¼çš„0x                               |
|                          |                                                              |
|                          |                                                              |
|                          |                                                              |

##### å®½åº¦æ ‡è¯†ç¬¦

| å ä½ç¬¦ | è¯´æ˜               |
| ------ | ------------------ |
| %f     | é»˜è®¤å®½åº¦ï¼Œé»˜è®¤ç²¾åº¦ |
| %9f    | å®½åº¦9ï¼Œé»˜è®¤ç²¾åº¦    |
| %.2f   | é»˜è®¤å®½åº¦ï¼Œç²¾åº¦2    |
| %9.2f  | å®½åº¦9ï¼Œç²¾åº¦2       |
| %9.f   | å®½åº¦9ï¼Œç²¾åº¦0       |

ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```go
n := 88.88
fmt.Printf("%f\n", n)
fmt.Printf("%9f\n", n)
fmt.Printf("%.2f\n", n)
fmt.Printf("%9.2f\n", n)
fmt.Printf("%9.f\n", n)
```

è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```
    88.880000
    88.880000
    88.88
        88.88
           89
```

##### å…¶ä»–falg

| å ä½ç¬¦ | è¯´æ˜                                                         |
| ------ | ------------------------------------------------------------ |
| â€™+â€™    | æ€»æ˜¯è¾“å‡ºæ•°å€¼çš„æ­£è´Ÿå·ï¼›å¯¹%qï¼ˆ%+qï¼‰ä¼šç”Ÿæˆå…¨éƒ¨æ˜¯ASCIIå­—ç¬¦çš„è¾“å‡ºï¼ˆé€šè¿‡è½¬ä¹‰ï¼‰ï¼› |
| â€™ â€˜    | å¯¹æ•°å€¼ï¼Œæ­£æ•°å‰åŠ ç©ºæ ¼è€Œè´Ÿæ•°å‰åŠ è´Ÿå·ï¼›å¯¹å­—ç¬¦ä¸²é‡‡ç”¨%xæˆ–%Xæ—¶ï¼ˆ% xæˆ–% Xï¼‰ä¼šç»™å„æ‰“å°çš„å­—èŠ‚ä¹‹é—´åŠ ç©ºæ ¼ |
| â€™-â€™    | åœ¨è¾“å‡ºå³è¾¹å¡«å……ç©ºç™½è€Œä¸æ˜¯é»˜è®¤çš„å·¦è¾¹ï¼ˆå³ä»é»˜è®¤çš„å³å¯¹é½åˆ‡æ¢ä¸ºå·¦å¯¹é½ï¼‰ï¼› |
| â€™#â€™    | å…«è¿›åˆ¶æ•°å‰åŠ 0ï¼ˆ%#oï¼‰ï¼Œåå…­è¿›åˆ¶æ•°å‰åŠ 0xï¼ˆ%#xï¼‰æˆ–0Xï¼ˆ%#Xï¼‰ï¼ŒæŒ‡é’ˆå»æ‰å‰é¢çš„0xï¼ˆ%#pï¼‰å¯¹%qï¼ˆ%#qï¼‰ï¼Œå¯¹%Uï¼ˆ%#Uï¼‰ä¼šè¾“å‡ºç©ºæ ¼å’Œå•å¼•å·æ‹¬èµ·æ¥çš„goå­—é¢å€¼ï¼› |
| â€˜0â€™    | ä½¿ç”¨0è€Œä¸æ˜¯ç©ºæ ¼å¡«å……ï¼Œå¯¹äºæ•°å€¼ç±»å‹ä¼šæŠŠå¡«å……çš„0æ”¾åœ¨æ­£è´Ÿå·åé¢ï¼› |

ä¸¾ä¸ªä¾‹å­ï¼š

```go
s := "æ¯è—¤"
fmt.Printf("%s\n", s)
fmt.Printf("%5s\n", s)
fmt.Printf("%-5s\n", s)
fmt.Printf("%5.7s\n", s)
fmt.Printf("%-5.7s\n", s)
fmt.Printf("%5.2s\n", s)
fmt.Printf("%05s\n", s)
```

è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```
    æ¯è—¤
       æ¯è—¤
    æ¯è—¤
       æ¯è—¤
    æ¯è—¤
       æ¯è—¤
    000æ¯è—¤
```

#### è·å–è¾“å…¥

fmtåŒ…ä¸‹æœ‰fmt.Scanã€fmt.Scanfã€fmt.Scanlnä¸‰ä¸ªå‡½æ•°ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä»æ ‡å‡†è¾“å…¥è·å–ç”¨æˆ·çš„è¾“å…¥ã€‚

##### fmt.Scan

```go
func Scan(a ...interface{}) (n int, err error)
```

```go
func main() {
    var (
        name    string
        age     int
        married bool
    )
    fmt.Scan(&name, &age, &married)
    fmt.Printf("æ‰«æç»“æœ name:%s age:%d married:%t \n", name, age, married)
}
```

fmt.Scanä»æ ‡å‡†è¾“å…¥ä¸­æ‰«æç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œå°†ä»¥ç©ºç™½ç¬¦åˆ†éš”çš„æ•°æ®åˆ†åˆ«å­˜å…¥æŒ‡å®šçš„å‚æ•°ã€‚

##### fmt.Scanf

```go
func Scanf(format string, a ...interface{}) (n int, err error)
```

Scanfä»æ ‡å‡†è¾“å…¥æ‰«ææ–‡æœ¬ï¼Œæ ¹æ®formatå‚æ•°æŒ‡å®šçš„æ ¼å¼å»è¯»å–ç”±ç©ºç™½ç¬¦åˆ†éš”çš„å€¼ä¿å­˜åˆ°ä¼ é€’ç»™æœ¬å‡½æ•°çš„å‚æ•°ä¸­ã€‚

```go
func main() {
    var (
        name    string
        age     int
        married bool
    )
    fmt.Scanf("1:%s 2:%d 3:%t", &name, &age, &married)
    fmt.Printf("æ‰«æç»“æœ name:%s age:%d married:%t \n", name, age, married)
}
```

```
$ ./fmt3    
1:andy 2:19 3:true 
æ‰«æç»“æœ name:andy age:19 married:true 

```

fmt.Scanfä¸åŒäºfmt.Scanç®€å•çš„ä»¥ç©ºæ ¼ä½œä¸ºè¾“å…¥æ•°æ®çš„åˆ†éš”ç¬¦ï¼Œfmt.Scanfä¸ºè¾“å…¥æ•°æ®æŒ‡å®šäº†å…·ä½“çš„è¾“å…¥å†…å®¹æ ¼å¼ï¼Œåªæœ‰æŒ‰ç…§æ ¼å¼è¾“å…¥æ•°æ®æ‰ä¼šè¢«æ‰«æå¹¶å­˜å…¥å¯¹åº”å˜é‡ã€‚

##### fmt.Scanln

```go
func Scanln(a ...interface{}) (n int, err error)
```

Scanlnç±»ä¼¼Scanï¼Œå®ƒåœ¨é‡åˆ°æ¢è¡Œæ—¶æ‰åœæ­¢æ‰«æã€‚æœ€åä¸€ä¸ªæ•°æ®åé¢å¿…é¡»æœ‰æ¢è¡Œæˆ–è€…åˆ°è¾¾ç»“æŸä½ç½®ã€‚

```go
func main() {
	var (
		name    string
		age     int
		married bool
	)
	fmt.Scanln(&name, &age, &married)
	fmt.Printf("æ‰«æç»“æœ name:%s age:%d married:%t \n", name, age, married)
}
```

```
./fmt4
æå¾·èƒœ 36 true
æ‰«æç»“æœ name:æå¾·èƒœ age:36 married:true 
```

##### bufio.NewReader

æƒ³å®Œæ•´è·å–è¾“å…¥çš„å†…å®¹ï¼Œè€Œè¾“å…¥çš„å†…å®¹å¯èƒ½åŒ…å«ç©ºæ ¼ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨bufioåŒ…æ¥å®ç°ã€‚



##### Fscanç³»åˆ—

ç±»ä¼¼ä¹‹å‰ä¸‰ä¸ªå‡½æ•°ï¼Œåªä¸è¿‡å®ƒä»¬ä¸æ˜¯ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ•°æ®è€Œæ˜¯ä»io.Readerä¸­è¯»å–æ•°æ®ã€‚

```go
func Fscan(r io.Reader, a ...interface{}) (n int, err error)
func Fscanln(r io.Reader, a ...interface{}) (n int, err error)
func Fscanf(r io.Reader, format string, a ...interface{}) (n int, err error)
```

##### Sscanç³»åˆ—

ä¸æ˜¯ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æ•°æ®è€Œæ˜¯ä»æŒ‡å®šå­—ç¬¦ä¸²ä¸­è¯»å–æ•°æ®ã€‚

```go
func Sscan(str string, a ...interface{}) (n int, err error)
func Sscanln(str string, a ...interface{}) (n int, err error)
func Sscanf(str string, format string, a ...interface{}) (n int, err error)
```







### 47.2 timeåŒ…

![](images/time.png)

#### æ—¶é—´ç±»å‹



#### æ—¶é—´æˆ³



##### æ—¶é—´é—´éš”



##### æ—¶é—´æ“ä½œ

```
Add
Sub
Equal
Before
After
```

##### å®šæ—¶å™¨

ä½¿ç”¨time.Tick(æ—¶é—´é—´éš”)æ¥è®¾ç½®å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šé“ï¼ˆchannelï¼‰ã€‚

```go
func tickDemo() {
    ticker := time.Tick(time.Second) //å®šä¹‰ä¸€ä¸ª1ç§’é—´éš”çš„å®šæ—¶å™¨
    for i := range ticker {
        fmt.Println(i)//æ¯ç§’éƒ½ä¼šæ‰§è¡Œçš„ä»»åŠ¡
    }
}
```

##### æ—¶é—´æ ¼å¼åŒ–

Goè¯­è¨€ä¸­æ ¼å¼åŒ–æ—¶é—´æ¨¡æ¿ä¸æ˜¯å¸¸è§çš„Y-m-d H:M:Sè€Œæ˜¯ä½¿ç”¨Goçš„è¯ç”Ÿæ—¶é—´2006å¹´1æœˆ2å·15ç‚¹04åˆ†ï¼ˆè®°å¿†å£è¯€ä¸º2006 1 2 3 4ï¼‰ã€‚



### 47.3 flagåŒ…

```go
func main() {
	if len(os.Args) > 0 {
		for index, arg := range os.Args {
			fmt.Printf("args[%d]=%v\n", index, arg)
		}
	}
}
```

```
./flag1 a b c d
args[0]=./flag1
args[1]=a
args[2]=b
args[3]=c
args[4]=d
```

#### flagå‚æ•°ç±»å‹

flagåŒ…æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°ç±»å‹æœ‰boolã€intã€int64ã€uintã€uint64ã€float float64ã€stringã€durationã€‚

| flagå‚æ•°     | æœ‰æ•ˆå€¼                                                       |
| ------------ | ------------------------------------------------------------ |
| å­—ç¬¦ä¸²flag   | åˆæ³•å­—ç¬¦ä¸²                                                   |
| æ•´æ•°flag     | 1234ã€0664ã€0x1234ç­‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°ã€‚                     |
| æµ®ç‚¹æ•°flag   | åˆæ³•æµ®ç‚¹æ•°                                                   |
| boolç±»å‹flag | 1, 0, t, f, T, F, true, false, TRUE, FALSE, True, Falseã€‚    |
| æ—¶é—´æ®µflag   | ä»»ä½•åˆæ³•çš„æ—¶é—´æ®µå­—ç¬¦ä¸²ã€‚å¦‚â€300msâ€ã€â€-1.5hâ€ã€â€2h45mâ€ã€‚ åˆæ³•çš„å•ä½æœ‰â€nsâ€ã€â€usâ€ /â€œÂµsâ€ã€â€msâ€ã€â€sâ€ã€â€mâ€ã€â€hâ€ã€‚ |

#### ä¸¤ç§å®šä¹‰å‘½ä»¤è¡Œflagå‚æ•°çš„æ–¹æ³•

##### flag.Type()

`flag.Type(flagå, é»˜è®¤å€¼, å¸®åŠ©ä¿¡æ¯)*Type`

```go
name := flag.String("name", "å¼ ä¸‰", "å§“å")
age := flag.Int("age", 18, "å¹´é¾„")
married := flag.Bool("married", false, "å©šå¦")
delay := flag.Duration("d", 0, "æ—¶é—´é—´éš”")
```

æ­¤æ—¶nameã€ageã€marriedã€delayå‡ä¸ºå¯¹åº”ç±»å‹çš„æŒ‡é’ˆã€‚

##### flag.TypeVar()

`flag.TypeVar(TypeæŒ‡é’ˆ, flagå, é»˜è®¤å€¼, å¸®åŠ©ä¿¡æ¯)`

```go
var name string
var age int
var married bool
var delay time.Duration
flag.StringVar(&name, "name", "å¼ ä¸‰", "å§“å")
flag.IntVar(&age, "age", 18, "å¹´é¾„")
flag.BoolVar(&married, "married", false, "å©šå¦")
flag.DurationVar(&delay, "d", 0, "æ—¶é—´é—´éš”")
```



#### å…¶ä»–å‡½æ•°

##### flag.Parse()

å®šä¹‰å¥½å‘½ä»¤è¡Œflagå‚æ•°åï¼Œéœ€è¦é€šè¿‡è°ƒç”¨flag.Parse()æ¥å¯¹å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œè§£æã€‚

æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°æ ¼å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š

- -flag xxx ï¼ˆä½¿ç”¨ç©ºæ ¼ï¼Œä¸€ä¸ª-ç¬¦å·ï¼‰
- --flag xxx ï¼ˆä½¿ç”¨ç©ºæ ¼ï¼Œä¸¤ä¸ª-ç¬¦å·ï¼‰
- -flag=xxx ï¼ˆä½¿ç”¨ç­‰å·ï¼Œä¸€ä¸ª-ç¬¦å·ï¼‰
- --flag=xxx ï¼ˆä½¿ç”¨ç­‰å·ï¼Œä¸¤ä¸ª-ç¬¦å·ï¼‰

å…¶ä¸­ï¼Œå¸ƒå°”ç±»å‹çš„å‚æ•°å¿…é¡»ä½¿ç”¨ç­‰å·çš„æ–¹å¼æŒ‡å®šã€‚

Flagè§£æåœ¨ç¬¬ä¸€ä¸ªéflagå‚æ•°ï¼ˆå•ä¸ªâ€-â€œä¸æ˜¯flagå‚æ•°ï¼‰ä¹‹å‰åœæ­¢ï¼Œæˆ–è€…åœ¨ç»ˆæ­¢ç¬¦â€â€“â€œä¹‹ååœæ­¢ã€‚



- flag.Args() ////è¿”å›å‘½ä»¤è¡Œå‚æ•°åçš„å…¶ä»–å‚æ•°ï¼Œä»¥[]stringç±»å‹
- flag.NArg() //è¿”å›å‘½ä»¤è¡Œå‚æ•°åçš„å…¶ä»–å‚æ•°ä¸ªæ•°
- flag.NFlag() //è¿”å›ä½¿ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°

#### ä½¿ç”¨æ¡ˆä¾‹

```go
func main() {
	// //å®šä¹‰å‘½ä»¤è¡Œå‚æ•°æ–¹å¼
	var name string
	var age int
	var married bool
	var delay time.Duration
	flag.StringVar(&name, "name", "andyron", "å§“å")
	flag.IntVar(&age, "age", 18, "å¹´é¾„")
	flag.BoolVar(&married, "married", false, "å©šå¦")
	flag.DurationVar(&delay, "d", 0, "å»¶è¿Ÿçš„æ—¶é—´é—´éš”")

	// è§£æå‘½ä»¤è¡Œå‚æ•°
	flag.Parse()
	fmt.Println(name, age, married, delay)
	// è¿”å›å‘½ä»¤è¡Œå‚æ•°åçš„å…¶ä»–å‚æ•°
	fmt.Println(flag.Args())
	// è¿”å›å‘½ä»¤è¡Œå‚æ•°åçš„å…¶ä»–å‚æ•°ä¸ªæ•°
	fmt.Println(flag.NArg())
	// è¿”å›ä½¿ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°
	fmt.Println(flag.NFlag())
}
```



å‘½ä»¤è¡Œå‚æ•°ä½¿ç”¨æç¤ºï¼š

```shell
./flag_demo -help
Usage of ./flag_demo:
  -age int
        å¹´é¾„ (default 18)
  -d duration
        å»¶è¿Ÿçš„æ—¶é—´é—´éš”
  -married
        å©šå¦
  -name string
        å§“å (default "andyron")
```

æ­£å¸¸ä½¿ç”¨å‘½ä»¤è¡Œflagå‚æ•°ï¼š

```shell
$ ./flag_demo -name pprof -age 19 -married=false -d=24s
pprof 19 false 24s
[]
0
4
```

ä½¿ç”¨éflagå‘½ä»¤è¡Œå‚æ•°ï¼š

```shell
$ ./flag_demo a c d
andyron 18 false 0s
[a c d]
3
0
```



### 47.4 stringsåŒ…â€”â€”å­—ç¬¦ä¸²å¤„ç†



#### æ£€ç´¢å­—ç¬¦ä¸²

![](images/image-20250102222004211.png)

#### åˆ†å‰²å­—ç¬¦ä¸²

![](images/image-20250102222415128.png)



#### å¤§å°å†™è½¬æ¢

![](images/image-20250102222439824.png)

#### ä¿®å‰ªå­—ç¬¦ä¸²

![](images/image-20250102222522187.png)

#### æ¯”è¾ƒå­—ç¬¦ä¸²

![](images/image-20250102222556733.png)





### 47.5 strconvåŒ…

å­—ç¬¦ä¸²ä¸å…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„ç±»å‹è½¬æ¢ã€‚

#### Parseç±»å‡½æ•°

Parseç±»å‡½æ•°ä¸»è¦çš„åŠŸèƒ½æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ã€‚

![](images/image-20250102222737543.png)



#### Formatç±»å‡½æ•°

Formatç±»å‡½æ•°ä¸»è¦çš„åŠŸèƒ½æ˜¯å°†å…¶ä»–ç±»å‹æ ¼å¼åŒ–æˆå­—ç¬¦ä¸²ã€‚

![](images/image-20250102224530130.png)





### 47.6 regexpæ­£åˆ™è¡¨è¾¾å¼åŒ…

#### æ­£åˆ™è¡¨è¾¾å¼ä¸­ä¸»è¦å…ƒå­—ç¬¦

![](images/epub_28438052_403.jpeg)

#### regexpåŒ…ä¸­æ ¸å¿ƒå‡½æ•°åŠæ–¹æ³•

ğŸ”–



### 47.7 mathåŒ…

![](images/image-20250102224620500.png)

### 47.8 éšæœºæ•°

â€œmath/randâ€åŒ…å®ç°äº†ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œèƒ½å¤Ÿç”Ÿæˆæ•´å‹å’Œæµ®ç‚¹å‹çš„éšæœºæ•°ã€‚ä½¿ç”¨éšæœºæ•°ç”Ÿæˆå™¨éœ€è¦æ”¾å…¥ç§å­ã€‚å¯ä»¥ä½¿ç”¨Seed()å‡½æ•°ç”Ÿæˆä¸€ä¸ªä¸ç¡®å®šçš„ç§å­æ”¾å…¥éšæœºæ•°ç”Ÿæˆå™¨ï¼Œè¿™æ ·æ¯æ¬¡è¿è¡Œéšæœºæ•°ç”Ÿæˆå™¨éƒ½ä¼šç”Ÿæˆä¸åŒçš„åºåˆ—ã€‚å¦‚æœæ²¡æœ‰åœ¨éšæœºæ•°ç”Ÿæˆå™¨ä¸­æ”¾å…¥ç§å­ï¼Œåˆ™é»˜è®¤ä½¿ç”¨å…·æœ‰ç¡®å®šæ€§çŠ¶æ€çš„ç§å­ï¼Œæ­¤æ—¶å¯ä»¥ç†è§£ä¸ºç§å­çš„å€¼æ˜¯ä¸€ä¸ªå¸¸æ•°1ï¼Œå³Seed(1)ã€‚

#### randåŒ…çš„æ ¸å¿ƒæ–¹æ³•

![](images/image-20250102225648425.png)

#### è·å–éšæœºæ•°çš„å‡ ç§æ–¹å¼





### netåŒ…

net/http



### æ–‡ä»¶æ“ä½œç›¸å…³

osåŒ…

io/ioutil åŒ…



### å¹¶å‘ç›¸å…³

**`sync` åŒ…**

**`context` åŒ…**





### æ•°æ®ç»“æ„ä¸ç®—æ³•ç›¸å…³

**`sort` åŒ…**

**`container` ç›®å½•ä¸‹çš„ç›¸å…³åŒ…ï¼ˆå¦‚ `list`ã€`map`ã€`heap` ç­‰ï¼‰**



### log ğŸ”–

https://www.topgoer.com/%E5%B8%B8%E7%94%A8%E6%A0%87%E5%87%86%E5%BA%93/log.html



### template



### encoding

æ•°æ®æ ¼å¼ï¼šJSONã€XMLã€MSGPackç­‰



### reflectåå°„



## 48 åå°„

å‚è€ƒï¼šã€ŠGoè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ã€‹-10

åå°„æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡ŒæœŸå¯¹ç¨‹åºæœ¬èº«è¿›è¡Œè®¿é—®å’Œä¿®æ”¹çš„èƒ½åŠ›ã€‚ç¨‹åºåœ¨ç¼–è¯‘æ—¶ï¼Œå˜é‡è¢«è½¬æ¢ä¸ºå†…å­˜åœ°å€ï¼Œå˜é‡åä¸ä¼šè¢«ç¼–è¯‘å™¨å†™å…¥å¯æ‰§è¡Œéƒ¨åˆ†ã€‚åœ¨è¿è¡Œç¨‹åºæ—¶ï¼Œç¨‹åºæ— æ³•è·å–è‡ªèº«çš„ä¿¡æ¯ã€‚

æ”¯æŒåå°„çš„è¯­è¨€å¯ä»¥åœ¨ç¨‹åºç¼–è¯‘æœŸå°†å˜é‡çš„åå°„ä¿¡æ¯ï¼Œå¦‚å­—æ®µåç§°ã€ç±»å‹ä¿¡æ¯ã€ç»“æ„ä½“ä¿¡æ¯ç­‰æ•´åˆåˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå¹¶ç»™ç¨‹åºæä¾›æ¥å£è®¿é—®åå°„ä¿¡æ¯ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç¨‹åºè¿è¡ŒæœŸè·å–ç±»å‹çš„åå°„ä¿¡æ¯ï¼Œå¹¶ä¸”æœ‰èƒ½åŠ›ä¿®æ”¹å®ƒä»¬ã€‚

Goè¯­è¨€ç¨‹åºåœ¨è¿è¡ŒæœŸä½¿ç”¨reflectåŒ…è®¿é—®ç¨‹åºçš„åå°„ä¿¡æ¯ã€‚

### 48.1ã€€ä½¿ç”¨åå°„è®¿é—®å˜é‡

`reflect`åŒ…

#### è·å–å˜é‡çš„ç±»å‹

#### è·å–å˜é‡çš„å€¼

#### åå°„å€¼çš„éç©ºå’Œæœ‰æ•ˆæ€§åˆ¤å®š



### 48.2 åå°„å€¼çš„éç©ºå’Œæœ‰æ•ˆæ€§åˆ¤å®š



### 48.3 ä½¿ç”¨åå°„è®¿é—®ç»“æ„ä½“



### 48.4 ä½¿ç”¨åå°„ä¿®æ”¹å€¼



### 48.5 ä½¿ç”¨åå°„è°ƒç”¨å‡½æ•°



### 48.6 ä½¿ç”¨åå°„åˆ›å»ºå˜é‡

